import { useContext } from 'react';
import { AppContext } from '@/contexts/AppContext';

export const translations = {
  en: {
    'app.title': 'RentalFlow Manager',
    'nav.dashboard': 'Dashboard',
    'nav.tenants': 'Tenants',
    'nav.invoices': 'Invoices',
    'nav.expenses': 'Expenses',
    'nav.properties': 'Properties',
    'role.admin': 'Admin',
    'role.tenant': 'Tenant',
    'status.paid': 'PAID',
    'status.pending': 'PENDING',
    'status.partial': 'PARTIAL',
    'debt.outstanding': 'Outstanding Debt',
    'action.submit_payment': 'Submit Payment',
    'action.mark_paid': 'Mark as PAID',
    'action.reject_payment': 'Reject Payment',
    'action.generate_invoices': 'Generate Invoices',
    'action.add_tenant': 'Add Tenant',
    'action.edit_tenant': 'Edit Tenant',
    'action.add_expense': 'Add Expense',
    'action.save': 'Save',
    'action.cancel': 'Cancel',
    'form.month': 'Month',
    'form.year': 'Year',
    'form.name': 'Name',
    'form.contact': 'Contact (Email/Phone)',
    'form.property': 'Property',
    'form.rent': 'Fixed Monthly Rent',
    'form.pays_utilities': 'Pays Utilities',
    'form.amount': 'Amount',
    'form.description': 'Description',
    'form.date': 'Date',
    'form.type': 'Type',
    'form.select_invoices': 'Select invoices to pay',
    'form.payment_amount': 'Payment Amount',
    'form.payment_receipt': 'Payment Receipt',
    'form.upload_receipt': 'Upload Receipt',
    'form.select_month': 'Select Month',
    'form.select_year': 'Select Year',
    'report.total_income': 'Total Income',
    'report.total_expenses': 'Total Expenses',
    'report.total_savings': 'Total Savings',
    'report.cash_flow': 'Cash Flow Report',
    'report.income_summary': 'Income Summary',
    'report.collected': 'Collected',
    'report.outstanding': 'Outstanding',
    'notifications.title': 'Notifications',
    'notifications.unverified_payments': 'Unverified Payments',
    'notifications.view': 'View',
    'tenant.current_invoices': 'Current & Past Invoices',
    'tenant.no_invoices': 'No invoices to display.',
    'tenant.debt_notifications_active': 'Daily debt notifications are active.',
    'table.header.tenant': 'Tenant',
    'table.header.property': 'Property',
    'table.header.month': 'Month',
    'table.header.total_due': 'Total Due',
    'table.header.status': 'Status',
    'table.header.actions': 'Actions',
    'table.header.description': 'Description',
    'table.header.amount': 'Amount',
    'table.header.date': 'Date',
    'table.header.address': 'Address',
    'verification.title': 'Payment Verification',
    'verification.details': 'Invoice Details',
    'verification.submitted_amount': 'Submitted Amount',
    'verification.receipt': 'Payment Receipt',
    'verification.verify_ai': 'Verify with AI',
    'verification.result': 'AI Verification Result',
    'verification.accurate': 'Accurate',
    'verification.not_accurate': 'Not Accurate',
    'verification.extracted_amount': 'Extracted Amount',
    'verification.notes': 'Notes',
    'verification.success': 'Payment verified and marked as PAID.',
    'verification.rejected': 'Payment rejected. Tenant will be notified.',
    'verification.error': 'AI verification failed. Please try again.',
    'invoice_generator.title': 'Generate Monthly Invoices',
    'invoice_generator.description': 'This will create a PENDING invoice for each active tenant for the selected month.',
    'invoice_generator.success': 'Invoices generated successfully for',
  },
  es: {
    'app.title': 'RentalFlow Manager',
    'nav.dashboard': 'Panel de Control',
    'nav.tenants': 'Inquilinos',
    'nav.invoices': 'Facturas',
    'nav.expenses': 'Gastos',
    'nav.properties': 'Propiedades',
    'role.admin': 'Administrador',
    'role.tenant': 'Inquilino',
    'status.paid': 'PAGADO',
    'status.pending': 'PENDIENTE',
    'status.partial': 'PARCIAL',
    'debt.outstanding': 'Deuda Pendiente',
    'action.submit_payment': 'Enviar Pago',
    'action.mark_paid': 'Marcar como PAGADO',
    'action.reject_payment': 'Rechazar Pago',
    'action.generate_invoices': 'Generar Facturas',
    'action.add_tenant': 'Añadir Inquilino',
    'action.edit_tenant': 'Editar Inquilino',
    'action.add_expense': 'Añadir Gasto',
    'action.save': 'Guardar',
    'action.cancel': 'Cancelar',
    'form.month': 'Mes',
    'form.year': 'Año',
    'form.name': 'Nombre',
    'form.contact': 'Contacto (Email/Teléfono)',
    'form.property': 'Propiedad',
    'form.rent': 'Renta Mensual Fija',
    'form.pays_utilities': 'Paga Servicios Públicos',
    'form.amount': 'Monto',
    'form.description': 'Descripción',
    'form.date': 'Fecha',
    'form.type': 'Tipo',
    'form.select_invoices': 'Seleccionar facturas a pagar',
    'form.payment_amount': 'Monto del Pago',
    'form.payment_receipt': 'Recibo de Pago',
    'form.upload_receipt': 'Subir Recibo',
    'form.select_month': 'Seleccionar Mes',
    'form.select_year': 'Seleccionar Año',
    'report.total_income': 'Ingresos Totales',
    'report.total_expenses': 'Gastos Totales',
    'report.total_savings': 'Ahorro Total',
    'report.cash_flow': 'Reporte de Flujo de Caja',
    'report.income_summary': 'Resumen de Ingresos',
    'report.collected': 'Recaudado',
    'report.outstanding': 'Pendiente',
    'notifications.title': 'Notificaciones',
    'notifications.unverified_payments': 'Pagos no Verificados',
    'notifications.view': 'Ver',
    'tenant.current_invoices': 'Facturas Actuales y Pasadas',
    'tenant.no_invoices': 'No hay facturas para mostrar.',
    'tenant.debt_notifications_active': 'Las notificaciones diarias de deuda están activas.',
    'table.header.tenant': 'Inquilino',
    'table.header.property': 'Propiedad',
    'table.header.month': 'Mes',
    'table.header.total_due': 'Total a Pagar',
    'table.header.status': 'Estado',
    'table.header.actions': 'Acciones',
    'table.header.description': 'Descripción',
    'table.header.amount': 'Monto',
    'table.header.date': 'Fecha',
    'table.header.address': 'Dirección',
    'verification.title': 'Verificación de Pago',
    'verification.details': 'Detalles de la Factura',
    'verification.submitted_amount': 'Monto Enviado',
    'verification.receipt': 'Recibo de Pago',
    'verification.verify_ai': 'Verificar con IA',
    'verification.result': 'Resultado de Verificación IA',
    'verification.accurate': 'Preciso',
    'verification.not_accurate': 'No Preciso',
    'verification.extracted_amount': 'Monto Extraído',
    'verification.notes': 'Notas',
    'verification.success': 'Pago verificado y marcado como PAGADO.',
    'verification.rejected': 'Pago rechazado. Se notificará al inquilino.',
    'verification.error': 'La verificación con IA falló. Por favor, intente de nuevo.',
    'invoice_generator.title': 'Generar Facturas Mensuales',
    'invoice_generator.description': 'Esto creará una factura PENDIENTE para cada inquilino activo para el mes seleccionado.',
    'invoice_generator.success': 'Facturas generadas con éxito para',
  },
};

export type TranslationKey = keyof (typeof translations)['en'];

export function useTranslation() {
  const context = useContext(AppContext);
  if (!context) {
    throw new Error('useTranslation must be used within an AppProvider');
  }
  const { language } = context;

  return (key: TranslationKey) => {
    return translations[language][key] || key;
  };
}
